import{ApiClient,useNotice,useQueryParams}from"adminjs";import{useEffect,useState}from"react";import{useRelationConfig}from"../providers/RelationConfigProvider.js";const api=new ApiClient;export const useRelationRecords=a=>{const{record:b,resource:c,targetResourceId:d,tab:e}=a,{relation:f,refreshToken:g}=useRelationConfig(),[h,i]=useState(),[j,k]=useState(!0),{direction:l,sortBy:m,page:n,parsedQuery:o}=useQueryParams(),p=useNotice();return useEffect(()=>{e===f&&b&&(k(!0),api.recordAction({actionName:"findRelation",recordId:b.id,resourceId:c.id,params:{relation:f,direction:l,sortBy:m,page:n}}).then(({data:{records:a,meta:b,notice:c}})=>{c&&p(c),k(!1),i({records:a,meta:b})}).finally(()=>{k(!1)}))},[e,f,b,c.id,d,l,m,n,o,g]),{data:h,isLoading:j}};