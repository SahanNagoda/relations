import{AppError}from"adminjs";import{Messages}from"../../constants/messages.js";export const assignManyToManyRelation=async(a,b,c)=>{if("post"!==b.method)return a;if(Object.keys(a.record?.errors??{}).length)return a;const{_admin:d,record:e}=c,f=b.query??{},{junctionResourceId:g,joinKey:h,inverseJoinKey:i}=f,j=f[h];if(!g||!h||!i||!j)return a;const k=d.findResource(g);if(!k)throw new AppError(Messages.JunctionResourceMissing,{junctionResourceId:g},{options:{junctionResourceId:g}});return await k.create({[h]:j,[i]:e?.id()??a.record.id}),a};